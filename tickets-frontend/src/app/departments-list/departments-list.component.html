<div class="container mt-5">
  <h2 class="mb-4">Liste des Départements</h2>

  <!-- Button to create a new department -->
  <button class="btn btn-primary mb-3" (click)="toggleCreateForm()">Créer un département</button>

  <!-- Department creation form -->
  <div *ngIf="isCreateFormVisible">
    <h3>Créer un nouveau département</h3>
    <form (ngSubmit)="createDepartement()">
      <div class="form-group">
        <label for="nom">Nom:</label>
        <input type="text" id="nom" class="form-control" [(ngModel)]="newDepartement.nom" name="nom" required />
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <input type="text" id="description" class="form-control" [(ngModel)]="newDepartement.description" name="description" required />
      </div>
      <button type="submit" class="btn btn-success mt-3">Créer</button>
    </form>
  </div>

  <table class="table table-bordered table-striped table-hover">
    <thead class="table-primary">
    <tr>
      <th>ID</th>
      <th>Nom</th>
      <th>Description</th>
      <th>Créé à</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let departement of departements">
      <td>{{ departement.id }}</td>
      <td>{{ departement.nom }}</td>
      <td>{{ departement.description }}</td>
      <td>{{ departement.createdAt | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>
        <button class="btn btn-warning" (click)="toggleUpdateForm(departement)">Modifier</button>
      </td>
    </tr>
    </tbody>
  </table>

  <!-- Department update form -->
  <div *ngIf="isUpdateFormVisible">
    <h3>Modifier le département</h3>
    <form (ngSubmit)="updateDepartement()">
      <div class="form-group">
        <label for="updateNom">Nom:</label>
        <input type="text" id="updateNom" class="form-control" [(ngModel)]="selectedDepartement.nom" name="nom" required />
      </div>
      <div class="form-group">
        <label for="updateDescription">Description:</label>
        <input type="text" id="updateDescription" class="form-control" [(ngModel)]="selectedDepartement.description" name="description" required />
      </div>
      <button type="submit" class="btn btn-success mt-3">Mettre à jour</button>
      <button type="button" class="btn btn-secondary mt-3" (click)="toggleUpdateForm()">Annuler</button>
    </form>
  </div>
</div>
